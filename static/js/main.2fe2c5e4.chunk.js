(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{32:function(t,e,n){},33:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var c,r=n(1),i=n(22),a=n.n(i),o=(n(32),n(4)),s=n(6),j=n(5),b=(n(33),n(18)),d=n.n(b),l=n(23),u=n(2),x=n(3),p=n(0),h=x.a.button(c||(c=Object(u.a)(['\n  background: #fef24c;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  padding: 6px 0px;\n  border: solid 1px #222831;\n  font-size: 14px;\n  cursor: pointer;\n  width: 80px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:hover {\n    background: #faf6b1;\n  }\n'])));var O,f,g,m,v=function(){return Object(p.jsx)(h,{children:"\u95b1\u8b80\u66f4\u591a"})},w="@media screen and (max-width: 768px)",y=x.a.div(O||(O=Object(u.a)(['\n  display: flex;\n  margin-top: 8px;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-size: 12px;\n  align-items: center;\n  '," {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n"])),w),k=x.a.div(f||(f=Object(u.a)(["\n  padding: 2px 6px;\n  color: white;\n  background-color: #222831;\n  margin-right: 10px;\n  vertical-align: middle;\n  "," {\n    margin-bottom: 3px;\n  }\n"])),w),S=x.a.p(g||(g=Object(u.a)(["\n  margin-right: 10px;\n  font-weight: bold;\n  "," {\n    margin-bottom: 3px;\n  }\n"])),w),C=x.a.p(m||(m=Object(u.a)(["\n  color: #818285;\n"])));var F,P,E=function(t){var e=t.category,n=t.author,c=t.createdAt;return Object(p.jsxs)(y,{children:[Object(p.jsx)(k,{children:e}),Object(p.jsx)(S,{children:n}),Object(p.jsx)(C,{children:c})]})},N=x.a.h1(F||(F=Object(u.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  font-size: 25px;\n  text-decoration: none;\n  line-height: 28px;\n  word-break: break-word;\n  display: contents;\n']))),z=x.a.button(P||(P=Object(u.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  padding: 6px 0px;\n  border: solid 1px #222831;\n  font-size: 14px;\n  cursor: pointer;\n  width: 80px;\n  background: #92c4dc;\n  &:hover {\n    background: #79a0b7;\n  }\n  :first-child {\n    margin-right: 20px;\n  }\n'])));var T,A=function(){return Object(p.jsx)(z,{children:"\u7de8\u8f2f\u6587\u7ae0"})},D=Object(x.a)(z)(T||(T=Object(u.a)(["\n  background: #fe8f8f;\n  &:hover {\n    background: #ff6b6b;\n  }\n"])));var I,L,R,U,M,B,H=function(t){var e=t.handleDeletePost;return Object(p.jsx)(D,{onClick:e,children:"\u522a\u9664\u6587\u7ae0"})},_="https://student-json-api.lidemy.me",G=function(t){return fetch("".concat(_,"/posts?id=").concat(t,"&_expand=user")).then((function(t){if(t.ok)return t.json();throw new Error("Fail to fetch")})).catch((function(t){return t}))},J=function(){var t=localStorage.getItem("token");return fetch("".concat(_,"/me"),{headers:{authorization:"Bearer ".concat(t)}}).then((function(t){if(t.ok)return t.json();throw new Error("Fail to get user")})).catch((function(t){return t}))},$=function(t){var e=localStorage.getItem("token");return fetch("".concat(_,"/posts/").concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"}}).then((function(t){if(t.ok)return t.json();throw new Error("Fail to delete")})).catch((function(t){return t}))},W=x.a.div(I||(I=Object(u.a)(["\n  width: 100%;\n  display: flex;\n  position: relative;\n  margin-top: 50px;\n  height: auto;\n"]))),V=x.a.div(L||(L=Object(u.a)(["\n  max-width: 350px;\n  height: auto;\n  "," {\n    display: none;\n  }\n"])),w),Y=x.a.img(R||(R=Object(u.a)(["\n  width: 100%;\n  height: auto;\n"]))),q=x.a.div(U||(U=Object(u.a)(["\n  width: 60%;\n  margin-left: 20px;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  "," {\n    width: 100%;\n    margin-left: 0px;\n  }\n"])),w),K=x.a.div(M||(M=Object(u.a)(['\n  color: #818285;\n  margin-top: 9px;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: lighter;\n  font-size: 16px;\n  line-height: 24px;\n  overflow: hidden;\n  height: auto;\n  margin-bottom: 15px;\n  word-break: break-all;\n']))),Q=x.a.div(B||(B=Object(u.a)(["\n  display: flex;\n"])));var X,Z,tt,et=function(t){var e=t.imgSrc,n=t.title,c=t.category,r=t.author,i=t.createdAt,a=t.preText,o=t.linkPath,b=t.edit,u=t.showPosts,x=t.setShowPosts,h=t.currentPage,O=Object(j.f)(),f=function(){var t=Object(l.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Hey! \u78ba\u5b9a\u8981\u522a\u9664\u6587\u7ae0\u55ce\uff1f\u522a\u9664\u5f8c\u5c31\u4e0d\u53ef\u56de\u5fa9\u56c9\uff01")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,$(e);case 5:0===(n=u.filter((function(t){return t.id!==e}))).length&&1!==h?O.push("/list/page/".concat(h-1)):x(n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)(W,{children:[Object(p.jsx)(V,{children:Object(p.jsx)(Y,{src:e})}),Object(p.jsxs)(q,{children:[Object(p.jsx)(N,{as:s.b,to:"/post/".concat(o),children:n}),Object(p.jsx)(E,{category:c,author:r,createdAt:i}),Object(p.jsx)(K,{children:a}),b?Object(p.jsxs)(Q,{children:[Object(p.jsx)(s.b,{to:"/edit/".concat(o),children:Object(p.jsx)(A,{})}),Object(p.jsx)(H,{handleDeletePost:function(){return f(o)}})]}):Object(p.jsx)(s.b,{to:"/post/".concat(o),children:Object(p.jsx)(v,{})})]})]})},nt=x.a.div(X||(X=Object(u.a)(["\n  position: relative;\n  margin-bottom: 40px;\n"]))),ct=x.a.div(Z||(Z=Object(u.a)(['\n  display: inline-block;\n  padding: 5px 10px;\n  background: #222831;\n  color: white;\n  font-family: "Noto Sans TC", sans-serif;\n']))),rt=x.a.div(tt||(tt=Object(u.a)(["\n  width: 100%;\n  height: 1px;\n  background: #222831;\n  position: absolute;\n  bottom: 0;\n"])));var it,at,ot,st=function(t){var e=t.title;return Object(p.jsxs)(nt,{children:[Object(p.jsx)(ct,{children:e}),Object(p.jsx)(rt,{})]})},jt=x.a.section(it||(it=Object(u.a)(["\n  padding: 40px 60px;\n  width: 100%;\n  "," {\n    padding: 40px 30px;\n  }\n"])),w),bt=x.a.div(at||(at=Object(u.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: 10px solid #f3f3f3;\n  border-top: 10px solid #8bcdcd;\n  border-radius: 50%;\n  width: 70px;\n  height: 70px;\n  animation: spin 0.5s linear infinite;\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),dt=x.a.footer(ot||(ot=Object(u.a)(['\n  width: 100%;\n  min-height: 40px;\n  background: linear-gradient(35deg, #f8f18d, #e1f5c4);\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n  font-size: 13px;\n  letter-spacing: 1px;\n  overflow-wrap: break-word;\n  padding: 5px;\n'])));var lt,ut=function(){return Object(p.jsxs)(dt,{children:["Copyright \xa9 ",(new Date).getFullYear()," Hazel's Blog All Rights Reserved."]})};function xt(t){return t.length<=300?t:t.slice(0,200)}var pt,ht=x.a.div(lt||(lt=Object(u.a)(["\n  font-size: 15px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  color: #222831;\n  padding: 10px;\n  cursor: pointer;\n  &:hover {\n    color: #8bcdcd;\n    border: 1px solid #8bcdcd;\n  }\n  ","\n"])),(function(t){return t.isCurrentPage&&"background: #8bcdcd; color: white"})),Ot=x.a.div(pt||(pt=Object(u.a)(["\n  font-size: 20px;\n  display: flex;\n  color: #222831;\n  width: 100%;\n  margin: 60px 0 30px 0;\n  justify-content: center;\n  flex-wrap: wrap;\n"]))),ft=n(15);var gt=function(t){var e=t.totalPostCount,n=t.pageNum,c=t.perPage,i=t.route,a=Object(r.useRef)(Array.apply(null,Array(Math.ceil(e/c))).map((function(t,e){return e+1})));return Object(p.jsxs)(Ot,{children:[n>1&&Object(p.jsx)(s.b,{to:"".concat(i,"/").concat(n-1),children:Object(p.jsx)(ht,{isCurrentPage:n===n-1,children:"\u25c0"})},Object(ft.a)()),(n<=4||!n)&&a.current.slice(0,7).map((function(t){return Object(p.jsx)(s.b,{to:"".concat(i,"/").concat(t),children:Object(p.jsx)(ht,{isCurrentPage:n===t,children:t})},Object(ft.a)())})),n>4&&a.current.slice(n-4,n+3).map((function(t){return Object(p.jsx)(s.b,{to:"".concat(i,"/").concat(t),children:Object(p.jsx)(ht,{isCurrentPage:n===t,children:t})},Object(ft.a)())})),(n<Math.ceil(e/c)||!n)&&Object(p.jsx)(s.b,{to:"".concat(i,"/").concat(n+1),children:Object(p.jsx)(ht,{isCurrentPage:n===n+1,children:"\u25b6"})},Object(ft.a)())]})};var mt,vt,wt,yt,kt,St,Ct,Ft,Pt=function(){var t=Object(j.h)().currentPage,e=Object(j.g)().pathname,n=Object(r.useState)([]),c=Object(o.a)(n,2),i=c[0],a=c[1],s=Object(r.useState)(!0),b=Object(o.a)(s,2),d=b[0],l=b[1],u=Object(r.useRef)(0);return Object(r.useEffect)((function(){(function(t,e){var n=_+"/posts?",c={_sort:"createdAt",_order:"desc",_limit:t,_page:e,_expand:"user"},r=[];for(var i in c)r.push("".concat(i,"=").concat(encodeURIComponent(c[i])));return n+=r.join("&"),fetch(n)})(5,t||1).then((function(t){if(t.ok)return u.current=t.headers.get("x-total-count"),t.json();throw new Error("Fail to fetch")})).then((function(t){a(t),l(!1)})).catch((function(t){return t}))}),[t]),Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(jt,{children:[Object(p.jsx)(st,{title:"\u6700\u65b0\u6587\u7ae0"}),d?Object(p.jsx)(bt,{}):Object(p.jsxs)(p.Fragment,{children:[i.map((function(t){return Object(p.jsx)(et,{imgSrc:"https://images.unsplash.com/photo-1585366119957-e9730b6d0f60?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1051&q=80",title:t.title,linkPath:t.id,category:"\u55ae\u7d14mur-mur",author:t.user.nickname,createdAt:new Date(t.createdAt).toLocaleString(),preText:"".concat(xt(t.body)," ..."),edit:!1},t.id)})),u.current>5&&Object(p.jsx)(gt,{totalPostCount:u.current,pageNum:Number(t),perPage:5,route:"/page"})]})]}),!d&&Object(p.jsx)(ut,{})]})},Et=Object(r.createContext)(null),Nt=Object(r.createContext)(null),zt=Object(x.a)(jt)(mt||(mt=Object(u.a)(["\n  padding: 100px 100px 150px 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Tt=x.a.form(vt||(vt=Object(u.a)(["\n  border: solid 1px #222831;\n  min-width: 300px;\n  padding: 30px 40px 40px 40px;\n  text-align: center;\n"]))),At=x.a.h1(wt||(wt=Object(u.a)(["\n  color: #222831;\n"]))),Dt=x.a.div(yt||(yt=Object(u.a)(["\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n"]))),It=x.a.label(kt||(kt=Object(u.a)(["\n  color: #222831;\n  margin-bottom: 3px;\n"]))),Lt=x.a.input(St||(St=Object(u.a)(["\n  height: 25px;\n  padding: 3px;\n"]))),Rt=x.a.button(Ct||(Ct=Object(u.a)(["\n  margin-top: 40px;\n  color: white;\n  background: #222831;\n  border: solid 1px #222831;\n  padding: 10px 20px;\n  font-weight: bold;\n  &:hover {\n    color: white;\n    background: #4d5a6e;\n    border: solid 1px #4d5a6e;\n    cursor: pointer;\n  }\n"]))),Ut=x.a.div(Ft||(Ft=Object(u.a)(["\n  word-break: break-word;\n  font-size: 14px;\n  color: darkred;\n  font-weight: bold;\n  margin-top: 20px;\n"])));function Mt(){var t=Object(r.useState)(""),e=Object(o.a)(t,2),n=e[0],c=e[1],i=Object(r.useState)(""),a=Object(o.a)(i,2),s=a[0],b=a[1],d=Object(r.useState)(null),l=Object(o.a)(d,2),u=l[0],x=l[1],h=Object(r.useState)(!1),O=Object(o.a)(h,2),f=O[0],g=O[1],m=Object(r.useContext)(Et).setUser,v=Object(j.f)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(zt,{children:Object(p.jsxs)(Tt,{onSubmit:function(t){t.preventDefault(),x(null),f||(g(!0),function(t,e){return fetch("".concat(_,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e})}).then((function(t){if(t.ok)return t.json();throw new Error("Fail to register")})).catch((function(t){return t}))}(n,s).then((function(t){if(0===t.ok)return x(t.message),void g(!1);var e=t.token;localStorage.setItem("token",e),J().then((function(t){if(1!==t.ok)return x(t.toString()),void g(!1);m(t.data),g(!1),v.push("/")}))})))},children:[Object(p.jsx)(At,{children:"Log In"}),Object(p.jsxs)(Dt,{children:[Object(p.jsx)(It,{htmlFor:"username",children:"USERNAME"}),Object(p.jsx)(Lt,{onChange:function(t){return c(t.target.value)},id:"username"})]}),Object(p.jsxs)(Dt,{children:[Object(p.jsx)(It,{htmlFor:"password",children:"PASSWORD"}),Object(p.jsx)(Lt,{type:"password",onChange:function(t){return b(t.target.value)},id:"password"})]}),Object(p.jsx)(Rt,{children:"Log in"}),u&&Object(p.jsxs)(Ut,{children:["\u54ce\u5440\uff01\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a",u]})]})}),Object(p.jsx)(ut,{})]})}var Bt,Ht,_t,Gt,Jt,$t,Wt,Vt,Yt,qt,Kt,Qt=n.p+"static/media/hazel.2f711b2f.jpg",Xt=Object(x.a)(jt)(Bt||(Bt=Object(u.a)([""]))),Zt=x.a.div(Ht||(Ht=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  "," {\n    flex-direction: column;\n  }\n"])),w),te=x.a.img(_t||(_t=Object(u.a)(["\n  width: 200px;\n  height: 200px;\n  border-radius: 50%;\n  margin-right: 40px;\n  "," {\n    margin-right: 0px;\n    margin-bottom: 30px;\n  }\n"])),w),ee=x.a.div(Gt||(Gt=Object(u.a)(['\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #222831;\n  width: fix-content;\n  border-radius: 50px;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  font-size: 30px;\n  padding: 30px;\n  '," {\n    border: none;\n    font-size: 25px;\n    padding: 0px;\n    text-align: center;\n    margin-bottom: 50px;\n  }\n"])),w);function ne(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Xt,{children:[Object(p.jsx)(st,{title:"\u95dc\u65bc\u6211"}),Object(p.jsxs)(Zt,{children:[Object(p.jsx)(te,{src:Qt}),Object(p.jsxs)(ee,{children:["\u54c8\u56c9\u6211\u662f Hazel\uff01",Object(p.jsx)("br",{}),"\u606d\u559c\u4f60\u5df2\u88ab\u597d\u904b\u5c0f\u9d5d\u62dc\u8a2a\uff5e",Object(p.jsx)("br",{}),"\u63a5\u4e0b\u4f86\u7684\u5e7e\u5929\u5167\u6703\u6709\u597d\u4e8b\u964d\u81e8\u5466 \u2727*\uff61\u0669(\u02ca\u15dc\u02cb*)\u0648\u2727*\uff61"]})]})]}),Object(p.jsx)(ut,{})]})}var ce,re=Object(x.a)(zt)(Jt||(Jt=Object(u.a)([""]))),ie=Object(x.a)(Tt)($t||($t=Object(u.a)([""]))),ae=Object(x.a)(At)(Wt||(Wt=Object(u.a)([""]))),oe=Object(x.a)(Dt)(Vt||(Vt=Object(u.a)([""]))),se=Object(x.a)(It)(Yt||(Yt=Object(u.a)([""]))),je=Object(x.a)(Lt)(qt||(qt=Object(u.a)([""]))),be=Object(x.a)(Rt)(Kt||(Kt=Object(u.a)([""])));function de(){var t=Object(r.useState)(""),e=Object(o.a)(t,2),n=e[0],c=e[1],i=Object(r.useState)(""),a=Object(o.a)(i,2),s=a[0],b=a[1],d=Object(r.useState)(""),l=Object(o.a)(d,2),u=l[0],x=l[1],h=Object(r.useState)(null),O=Object(o.a)(h,2),f=O[0],g=O[1],m=Object(r.useState)(!1),v=Object(o.a)(m,2),w=v[0],y=v[1],k=Object(r.useContext)(Et).setUser,S=Object(j.f)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(re,{children:Object(p.jsxs)(ie,{onSubmit:function(t){t.preventDefault(),g(null),w||(y(!0),function(t,e,n){return fetch("".concat(_,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:t,username:e,password:n})}).then((function(t){if(t.ok)return t.json();throw new Error("Fail to register")})).catch((function(t){return t}))}(n,s,u).then((function(t){if(0===t.ok)return g(t.message),void y(!1);var e=t.token;localStorage.setItem("token",e),J().then((function(t){if(1!==t.ok)return g(t.toString()),void y(!1);k(t.data),S.push("/"),y(!1)}))})))},children:[Object(p.jsx)(ae,{children:"Register"}),Object(p.jsxs)(oe,{children:[Object(p.jsx)(se,{htmlFor:"nickname",children:"NICKNAME"}),Object(p.jsx)(je,{onChange:function(t){return c(t.target.value)},id:"nickname"})]}),Object(p.jsxs)(oe,{children:[Object(p.jsx)(se,{htmlFor:"username",children:"USERNAME"}),Object(p.jsx)(je,{onChange:function(t){return b(t.target.value)},id:"username"})]}),Object(p.jsxs)(oe,{children:[Object(p.jsx)(se,{htmlFor:"password",children:"PASSWORD"}),Object(p.jsx)(je,{type:"password",onChange:function(t){return x(t.target.value)},id:"password"})]}),Object(p.jsx)(be,{children:"Register"}),f&&Object(p.jsxs)(Ut,{children:["\u54ce\u5440\uff01\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a",f]})]})}),Object(p.jsx)(ut,{})]})}var le=Object(x.a)(jt)(ce||(ce=Object(u.a)(["\n  padding-bottom: 110px;\n"])));var ue,xe,pe,he,Oe=function(){window.scrollTo(0,0);var t=Object(j.h)().currentPage,e=Object(r.useContext)(Et).user,n=Object(r.useContext)(Nt).isGettingUser,c=Object(r.useState)([]),i=Object(o.a)(c,2),a=i[0],s=i[1],b=Object(r.useState)(!0),d=Object(o.a)(b,2),l=d[0],u=d[1],x=Object(r.useState)(0),h=Object(o.a)(x,2),O=h[0],f=h[1],g=Object(j.f)();return Object(r.useEffect)((function(){n||e||(alert("\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528\u7ba1\u7406\u6587\u7ae0\u529f\u80fd\u5594\uff01"),g.push("/"))}),[g,n,e]),Object(r.useEffect)((function(){if(e){var n=t||1;(function(t,e,n){var c=_+"/posts?",r={_sort:"createdAt",_order:"desc",userId:t,_limit:e,_page:n,_expand:"user"},i=[];for(var a in r)i.push("".concat(a,"=").concat(encodeURIComponent(r[a])));return c+=i.join("&"),fetch(c)})(e.id,5,n).then((function(t){if(t.ok)return f(t.headers.get("x-total-count")),t.json();throw new Error("Fail to fetch")})).then((function(t){s(t),u(!1)})).catch((function(t){return t}))}}),[t,e]),Object(p.jsx)(p.Fragment,{children:e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(le,{children:[Object(p.jsx)(st,{title:"\u6211\u7684\u6587\u7ae0\u5217\u8868"}),l?Object(p.jsx)(bt,{}):Object(p.jsxs)(p.Fragment,{children:[0!==a.length&&a.map((function(e){return Object(p.jsx)(et,{imgSrc:"https://images.unsplash.com/photo-1585366119957-e9730b6d0f60?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1051&q=80",title:e.title,linkPath:e.id,category:"\u55ae\u7d14mur-mur",author:e.user.nickname,createdAt:new Date(e.createdAt).toLocaleString(),preText:"".concat(xt(e.body)," ..."),edit:!0,showPosts:a,setShowPosts:s,currentPage:Number(t)},e.id)})),O>5&&Object(p.jsx)(gt,{totalPostCount:O,pageNum:Number(t),perPage:5,route:"/list/page"}),(0===Number(O)||0===a.length)&&Object(p.jsx)("div",{children:"\u5c1a\u7121\u767c\u8868\u4efb\u4f55\u6587\u7ae0\uff0c\u5feb\u4f86\u5beb\u65b0\u6587\u7ae0\u5427\uff01"})]})]}),Object(p.jsx)(ut,{})]})})},fe=x.a.section(ue||(ue=Object(u.a)(["\n  padding: 80px 100px 180px 100px;\n  "," {\n    padding: 80px 30px 180px 30px;\n  }\n"])),w),ge=x.a.div(xe||(xe=Object(u.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-size: 15px;\n  white-space: pre-wrap;\n']))),me=Object(x.a)(N)(pe||(pe=Object(u.a)(["\n  display: block;\n  font-size: 36px;\n  margin-bottom: 20px;\n  line-height: 40px;\n"]))),ve=Object(x.a)(ge)(he||(he=Object(u.a)(["\n  font-size: 20px;\n  margin-top: 20px;\n"])));var we,ye,ke,Se,Ce,Fe,Pe,Ee,Ne,ze,Te,Ae,De,Ie,Le=function(){var t=Object(r.useState)(),e=Object(o.a)(t,2),n=e[0],c=e[1],i=Object(j.h)().id;return Object(r.useEffect)((function(){G(i).then((function(t){return c(t)}))}),[i]),Object(p.jsxs)(p.Fragment,{children:[n&&Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(fe,{children:[Object(p.jsx)(me,{children:n[0].title}),Object(p.jsx)(E,{category:n[0].category?n[0].category:"\u55ae\u7d14mur-mur",author:n[0].user.nickname,createdAt:new Date(n[0].createdAt).toLocaleString()}),Object(p.jsx)(ve,{children:n[0].body})]})}),Object(p.jsx)(ut,{})]})},Re=n(11),Ue=Object(x.a)(jt)(we||(we=Object(u.a)(["\n  padding: 80px 100px 150px 100px;\n  "," {\n    padding: 80px 30px 150px 30px;\n  }\n"])),w),Me=x.a.div(ye||(ye=Object(u.a)(["\n  border: solid 1px #818285;\n  padding: 30px 30px 70px 30px;\n  position: relative;\n"]))),Be=x.a.h1(ke||(ke=Object(u.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  margin-bottom: 30px;\n']))),He=x.a.form(Se||(Se=Object(u.a)([""]))),_e=x.a.div(Ce||(Ce=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 30px;\n"]))),Ge=x.a.input(Fe||(Fe=Object(u.a)(["\n  border: solid 1px #818285;\n  padding: 3px;\n  height: 30px;\n  width: 100%;\n"]))),Je=x.a.textarea(Pe||(Pe=Object(u.a)(["\n  border: solid 1px #818285;\n  padding: 3px;\n  min-height: 400px;\n  width: 100%;\n"]))),$e=x.a.button(Ee||(Ee=Object(u.a)(['\n  position: absolute;\n  right: 30px;\n  bottom: 30px;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  background: white;\n  border: solid 1px #818285;\n  padding: 5px 25px;\n  cursor: pointer;\n  &:hover {\n    background: #222831;\n    color: white;\n  }\n']))),We=x.a.div(Ne||(Ne=Object(u.a)(["\n  word-break: break-word;\n  font-size: 14px;\n  color: darkred;\n  font-weight: bold;\n  margin-bottom: 10px;\n  text-align: right;\n"])));function Ve(){var t=Object(r.useContext)(Et).user,e=Object(r.useContext)(Nt).isGettingUser,n=Object(r.useState)({title:"",body:""}),c=Object(o.a)(n,2),i=c[0],a=c[1],s=Object(r.useState)(),b=Object(o.a)(s,2),d=b[0],l=b[1],u=Object(r.useState)(!1),x=Object(o.a)(u,2),h=x[0],O=x[1],f=Object(j.f)();function g(t){d&&l();var e=t.target,n=e.value;"title"!==e.name?a(Object(Re.a)(Object(Re.a)({},i),{},{body:n})):a(Object(Re.a)(Object(Re.a)({},i),{},{title:n}))}return Object(r.useEffect)((function(){e||t||(alert("\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528\u767c\u5e03\u6587\u7ae0\u529f\u80fd\u5594\uff01"),f.push("/"))}),[f,e,t]),Object(p.jsx)(p.Fragment,{children:t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ue,{children:Object(p.jsxs)(Me,{children:[Object(p.jsx)(Be,{children:"\u767c\u8868\u6587\u7ae0"}),Object(p.jsxs)(He,{children:[Object(p.jsx)(_e,{children:Object(p.jsx)(Ge,{onChange:g,name:"title",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u6a19\u984c"})}),Object(p.jsx)(_e,{children:Object(p.jsx)(Je,{onChange:g,name:"content",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u5167\u5bb9"})})]}),d&&Object(p.jsx)(We,{children:d}),Object(p.jsx)($e,{onClick:function(t){if(t.preventDefault(),!h){if(O(!0),""===i.title||""===i.body)return l("\u6587\u7ae0\u6a19\u984c\u6216\u6587\u7ae0\u5167\u5bb9\u672a\u586b\u5beb\uff0c\u8acb\u518d\u6aa2\u67e5\u4e00\u6b21"),void O(!1);(function(t,e){var n=localStorage.getItem("token");return fetch("".concat(_,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(n),"content-type":"application/json"},body:JSON.stringify({title:t,body:e})}).then((function(t){if(t.ok)return t.json();throw new Error("Fail to publish")})).catch((function(t){return t}))})(i.title,i.body).then((function(t){if(0===t.ok)return l("\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a".concat(t.message)),void O(!1);O(!1),f.push("/")}))}},children:"\u9001\u51fa\u6587\u7ae0"})]})}),Object(p.jsx)(ut,{})]})})}var Ye=x.a.div(ze||(ze=Object(u.a)(["\n  display: none;\n  @media screen and (max-width: 768px) {\n    display: block;\n    width: 50px;\n    height: 50px;\n  }\n"]))),qe=x.a.div(Te||(Te=Object(u.a)(["\n  padding: 10 px;\n  padding-right: 0;\n  position: absolute;\n  cursor: pointer;\n  right: 5%;\n  top: 50%;\n  transform: translate(-5%, -50%);\n"]))),Ke=x.a.div(Ae||(Ae=Object(u.a)(["\n  padding: 15 px;\n  padding-right: 0;\n  width: 30px;\n  height: 3px;\n  background: #484e57;\n  border-radius: 10px;\n  :not(:last-child) {\n    margin-bottom: 6px;\n  }\n"]))),Qe=x.a.div(De||(De=Object(u.a)(["\n  position: absolute;\n  top: 70px;\n  right: 0;\n  background: #484e57;\n  width: fit-content;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 0px 0px 10px 10px;\n  opacity: 0.9;\n  z-index: 10;\n"]))),Xe=Object(x.a)(s.b)(Ie||(Ie=Object(u.a)(["\n  text-decoration: none;\n  color: white;\n  font-size: 18px;\n  padding: 5px 30px;\n  margin-bottom: 10px;\n  :hover {\n    background: #f8f18d;\n    color: #484e57;\n  }\n  :last-child {\n    margin-bottom: 0px;\n  }\n"])));var Ze,tn,en,nn,cn=function(){var t=Object(r.useState)(!1),e=Object(o.a)(t,2),n=e[0],c=e[1],i=Object(r.useContext)(Et),a=i.user,s=i.setUser,b=Object(j.f)(),d=Object(r.useRef)(),l=Object(r.useRef)(),u=function(){return c(!1)},x=Object(r.useCallback)((function(t){n&&d.current&&!l.current.contains(t.target)&&!d.current.contains(t.target)&&c(!1)}),[n]);return Object(r.useEffect)((function(){return document.addEventListener("mousedown",x),function(){document.removeEventListener("mousedown",x)}}),[n,x]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ye,{onClick:function(){return c(!n)},ref:l,children:Object(p.jsxs)(qe,{children:[Object(p.jsx)(Ke,{}),Object(p.jsx)(Ke,{}),Object(p.jsx)(Ke,{})]})}),n&&Object(p.jsxs)(Qe,{ref:d,children:[Object(p.jsx)(Xe,{onClick:u,to:"/about",children:"\u95dc\u65bc\u6211"}),!a&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Xe,{onClick:u,to:"/register",children:"\u8a3b\u518a"}),Object(p.jsx)(Xe,{onClick:u,to:"/login",children:"\u767b\u5165"})]}),a&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Xe,{onClick:u,to:"/list",children:"\u7ba1\u7406\u6211\u7684\u6587\u7ae0"}),Object(p.jsx)(Xe,{onClick:u,to:"/write",children:"\u767c\u5e03\u6587\u7ae0"}),Object(p.jsx)(Xe,{to:"/",onClick:function(){s(null),localStorage.setItem("token",""),c(!1),b.push("/")},children:"\u767b\u51fa"})]})]})]})},rn=x.a.header(Ze||(Ze=Object(u.a)(["\n  height: 54px;\n  padding: 35px 60px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  "," {\n    padding: 35px 30px;\n  }\n"])),w),an=x.a.div(tn||(tn=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]))),on=Object(x.a)(s.b)(en||(en=Object(u.a)(['\n  margin: 0;\n  font-family: "Open Sans Condensed", sans-serif;\n  font-size: 30px;\n  font-weight: bold;\n  margin-right: 45px;\n  color: #222831;\n  cursor: pointer;\n  '," {\n    margin-right: 0px;\n    width: max-content;\n  }\n"])),w),sn=Object(x.a)(s.b)(nn||(nn=Object(u.a)(['\n  text-decoration: none;\n  color: #484e57;\n  cursor: pointer;\n  font-family: "Noto Sans TC", sans-serif;\n  border-bottom: 2px solid transparent;\n  & + & {\n    margin-left: 45px;\n  }\n  '," {\n    display: none;\n  }\n  ","\n"])),w,(function(t){return t.$isCurrentLink&&"border-bottom: 2px solid #f8f18d;"}));var jn,bn,dn,ln,un=function(){var t=Object(r.useContext)(Et),e=t.user,n=t.setUser,c=Object(r.useContext)(Nt).isGettingUser,i=Object(r.useState)("/"),a=Object(o.a)(i,2),s=a[0],b=a[1],d=Object(j.g)(),l=Object(j.f)();return Object(r.useEffect)((function(){b(d.pathname)}),[d]),Object(p.jsxs)(rn,{children:[Object(p.jsxs)(an,{children:[Object(p.jsx)(on,{to:"/",children:"Hazel's Blog"}),Object(p.jsx)(cn,{}),Object(p.jsx)(sn,{$isCurrentLink:"/about"===s,to:"/about",children:"\u95dc\u65bc\u6211"})]}),!c&&Object(p.jsx)(an,{children:e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(sn,{$isCurrentLink:"/list"===s,to:"/list",children:"\u7ba1\u7406\u6211\u7684\u6587\u7ae0"}),Object(p.jsx)(sn,{$isCurrentLink:"/write"===s,to:"/write",children:"\u767c\u5e03\u6587\u7ae0"}),Object(p.jsx)(sn,{to:"/",onClick:function(){n(null),localStorage.setItem("token",""),"/"!==s&&l.push("/")},children:"\u767b\u51fa"})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(sn,{$isCurrentLink:"/register"===s,to:"/register",children:"\u8a3b\u518a"}),Object(p.jsx)(sn,{$isCurrentLink:"/login"===s,to:"/login",children:"\u767b\u5165"})]})})]})},xn=x.a.div(jn||(jn=Object(u.a)(["\n  width: 100%;\n  height: 150px;\n  background: linear-gradient(35deg, #f8f18d, #e1f5c4);\n  position: relative;\n"]))),pn=x.a.div(bn||(bn=Object(u.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]))),hn=x.a.h1(dn||(dn=Object(u.a)(['\n  font-family: "Noto Sans TC", sans-serif;\n  font-size: 25px;\n  color: #222831;\n  width: max-content;\n']))),On=x.a.p(ln||(ln=Object(u.a)(["\n  color: #222831;\n  margin-top: 10px;\n"])));var fn,gn=function(){return Object(p.jsx)(xn,{children:Object(p.jsxs)(pn,{children:[Object(p.jsx)(hn,{children:"\u6b61\u8fce\u5149\u81e8\u3000(=^\uff65\u03c9\uff65^=)"}),Object(p.jsx)(On,{children:"WELCOME TO MY BLOG"})]})})},mn=x.a.form(fn||(fn=Object(u.a)([""])));function vn(){var t=Object(r.useState)(null),e=Object(o.a)(t,2),n=e[0],c=e[1],i=Object(r.useState)(),a=Object(o.a)(i,2),s=a[0],b=a[1],d=Object(r.useState)(!1),l=Object(o.a)(d,2),u=l[0],x=l[1],h=Object(j.f)(),O=Object(j.h)().id,f=Object(r.useContext)(Nt).isGettingUser,g=Object(r.useContext)(Et).user;function m(t){s&&b();var e=t.target,r=e.value;"title"!==e.name?c(Object(Re.a)(Object(Re.a)({},n),{},{body:r})):c(Object(Re.a)(Object(Re.a)({},n),{},{title:r}))}return Object(r.useEffect)((function(){f||g||(alert("\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528\u7de8\u8f2f\u6587\u7ae0\u529f\u80fd\u5594\uff01"),h.push("/"))}),[h,f,g]),Object(r.useEffect)((function(){G(O).then((function(t){c(t[0])}))}),[O]),Object(p.jsx)(p.Fragment,{children:g&&n&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ue,{children:Object(p.jsxs)(Me,{children:[Object(p.jsx)(Be,{children:"\u7de8\u8f2f\u6587\u7ae0"}),Object(p.jsxs)(mn,{children:[Object(p.jsx)(_e,{children:Object(p.jsx)(Ge,{defaultValue:n.title,onChange:m,name:"title",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u6a19\u984c"})}),Object(p.jsx)(_e,{children:Object(p.jsx)(Je,{defaultValue:n.body,onChange:m,name:"content",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u5167\u5bb9"})})]}),s&&Object(p.jsx)(We,{children:s}),Object(p.jsx)($e,{onClick:function(t){if(t.preventDefault(),!u){if(x(!0),""===n.title||""===n.body)return b("\u6587\u7ae0\u6a19\u984c\u6216\u6587\u7ae0\u5167\u5bb9\u672a\u586b\u5beb\uff0c\u8acb\u518d\u6aa2\u67e5\u4e00\u6b21"),void x(!1);(function(t,e,n){var c=localStorage.getItem("token");return fetch("".concat(_,"/posts/").concat(t),{method:"PATCH",headers:{authorization:"Bearer ".concat(c),"content-type":"application/json"},body:JSON.stringify({title:e,body:n})}).then((function(t){if(t.ok)return t.json();throw new Error("Fail to edit")})).catch((function(t){return t}))})(O,n.title,n.body).then((function(t){if(0===t.ok)return b("\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a".concat(t.message)),void x(!1);x(!1),h.push("/post/".concat(n.id))}))}},children:"\u9001\u51fa\u6587\u7ae0"})]})}),Object(p.jsx)(ut,{})]})})}var wn=function(){var t=Object(r.useState)(null),e=Object(o.a)(t,2),n=e[0],c=e[1],i=Object(r.useState)(!0),a=Object(o.a)(i,2),b=a[0],d=a[1];return Object(r.useEffect)((function(){localStorage.getItem("token")?J().then((function(t){if(!t.ok)return localStorage.setItem("token",""),void d(!1);c(t.data),d(!1)})):d(!1)}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Et.Provider,{value:{user:n,setUser:c},children:Object(p.jsx)(Nt.Provider,{value:{isGettingUser:b},children:Object(p.jsxs)(s.a,{basename:"/react-blog",children:[Object(p.jsx)(un,{}),Object(p.jsx)(gn,{}),Object(p.jsxs)(j.c,{children:[Object(p.jsx)(j.a,{exact:!0,path:"/",children:Object(p.jsx)(Pt,{})}),Object(p.jsx)(j.a,{path:"/page/:currentPage",children:Object(p.jsx)(Pt,{})}),Object(p.jsx)(j.a,{path:"/about",children:Object(p.jsx)(ne,{})}),Object(p.jsx)(j.a,{exact:!0,path:"/list",children:Object(p.jsx)(Oe,{})}),Object(p.jsx)(j.a,{path:"/list/page/:currentPage",children:Object(p.jsx)(Oe,{})}),Object(p.jsx)(j.a,{path:"/Register",children:Object(p.jsx)(de,{})}),Object(p.jsx)(j.a,{path:"/login",children:Object(p.jsx)(Mt,{})}),Object(p.jsx)(j.a,{path:"/post/:id",children:Object(p.jsx)(Le,{})}),Object(p.jsx)(j.a,{exact:!0,path:"/write",children:Object(p.jsx)(Ve,{})}),Object(p.jsx)(j.a,{path:"/edit/:id",children:Object(p.jsx)(vn,{})})]})]})})})})};a.a.render(Object(p.jsx)(wn,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.2fe2c5e4.chunk.js.map