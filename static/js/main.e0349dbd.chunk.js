(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{30:function(t,e,n){},31:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var c,r=n(1),a=n(21),i=n.n(a),o=(n(30),n(4)),s=n(7),j=n(5),b=(n(31),n(2)),d=n(3),l=n(0),x=d.a.button(c||(c=Object(b.a)(['\n  background: #fef24c;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  padding: 6px 0px;\n  border: solid 1px #222831;\n  font-size: 14px;\n  cursor: pointer;\n  width: 80px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:hover {\n    background: #faf6b1;\n  }\n'])));var p,O,h,u,f=function(){return Object(l.jsx)(x,{children:"\u95b1\u8b80\u66f4\u591a"})},g=d.a.div(p||(p=Object(b.a)(['\n  display: flex;\n  margin-top: 8px;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-size: 12px;\n  align-items: center;\n']))),m=d.a.div(O||(O=Object(b.a)(["\n  padding: 2px 6px;\n  color: white;\n  background-color: #222831;\n  margin-right: 10px;\n  vertical-align: middle;\n"]))),v=d.a.p(h||(h=Object(b.a)(["\n  margin-right: 10px;\n  font-weight: bold;\n"]))),y=d.a.p(u||(u=Object(b.a)(["\n  color: #818285;\n"])));var w,S,k=function(t){var e=t.category,n=t.author,c=t.createdAt;return Object(l.jsxs)(g,{children:[Object(l.jsx)(m,{children:e}),Object(l.jsx)(v,{children:n}),Object(l.jsx)(y,{children:c})]})},C=d.a.h1(w||(w=Object(b.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  font-size: 25px;\n  text-decoration: none;\n  line-height: 28px;\n  word-break: break-word;\n  display: contents;\n']))),N=d.a.button(S||(S=Object(b.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  padding: 6px 0px;\n  border: solid 1px #222831;\n  font-size: 14px;\n  cursor: pointer;\n  width: 80px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #92c4dc;\n  &:hover {\n    background: #79a0b7;\n  }\n'])));var T,z,A,F,E,I=function(){return Object(l.jsx)(N,{children:"\u7de8\u8f2f\u6587\u7ae0"})},D=d.a.div(T||(T=Object(b.a)(["\n  width: 100%;\n  display: flex;\n  position: relative;\n  margin-top: 50px;\n  height: auto;\n"]))),U=d.a.div(z||(z=Object(b.a)(["\n  max-width: 350px;\n  height: auto;\n"]))),M=d.a.img(A||(A=Object(b.a)(["\n  width: 100%;\n  height: auto;\n"]))),R=d.a.div(F||(F=Object(b.a)(["\n  width: 60%;\n  margin-left: 20px;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n"]))),B=d.a.div(E||(E=Object(b.a)(['\n  color: #818285;\n  margin-top: 9px;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: lighter;\n  font-size: 16px;\n  line-height: 24px;\n  overflow: hidden;\n  height: auto;\n  margin-bottom: 15px;\n  word-break: break-all;\n'])));var P,G,H,_=function(t){var e=t.imgSrc,n=t.title,c=t.category,r=t.author,a=t.createdAt,i=t.preText,o=t.linkPath,j=t.edit;return Object(l.jsxs)(D,{children:[Object(l.jsx)(U,{children:Object(l.jsx)(M,{src:e})}),Object(l.jsxs)(R,{children:[Object(l.jsx)(C,{as:s.b,to:"/post/".concat(o),children:n}),Object(l.jsx)(k,{category:c,author:r,createdAt:a}),Object(l.jsx)(B,{children:i}),j?Object(l.jsx)(s.b,{to:"/edit/".concat(o),children:Object(l.jsx)(I,{})}):Object(l.jsx)(s.b,{to:"/post/".concat(o),children:Object(l.jsx)(f,{})})]})]})},L=d.a.div(P||(P=Object(b.a)(["\n  position: relative;\n  margin-bottom: 40px;\n"]))),J=d.a.div(G||(G=Object(b.a)(['\n  display: inline-block;\n  padding: 5px 10px;\n  background: #222831;\n  color: white;\n  font-family: "Noto Sans TC", sans-serif;\n']))),W=d.a.div(H||(H=Object(b.a)(["\n  width: 100%;\n  height: 1px;\n  background: #222831;\n  position: absolute;\n  bottom: 0;\n"])));var V,Y,q,K,Q,X=function(t){var e=t.title;return Object(l.jsxs)(L,{children:[Object(l.jsx)(J,{children:e}),Object(l.jsx)(W,{})]})},Z="https://student-json-api.lidemy.me",$=function(t){return fetch("".concat(Z,"/posts?id=").concat(t)).then((function(t){return t.json()}))},tt=function(){var t=localStorage.getItem("token");return fetch("".concat(Z,"/me"),{headers:{authorization:"Bearer ".concat(t)}}).then((function(t){return t.json()}))},et=d.a.section(V||(V=Object(b.a)(["\n  padding: 40px 100px;\n  width: 100%;\n"]))),nt=d.a.div(Y||(Y=Object(b.a)(["\n  padding: 0 200px;\n  font-size: 20px;\n  display: flex;\n  color: #222831;\n  width: 100%;\n  margin: 60px 0;\n  justify-content: center;\n"]))),ct=d.a.div(q||(q=Object(b.a)(["\n  font-size: 15px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  color: #222831;\n  padding: 10px;\n  cursor: pointer;\n  &:hover {\n    color: #8bcdcd;\n    border: 1px solid #8bcdcd;\n  }\n"]))),rt=n(15),at=d.a.div(K||(K=Object(b.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: 10px solid #f3f3f3;\n  border-top: 10px solid #8bcdcd;\n  border-radius: 50%;\n  width: 70px;\n  height: 70px;\n  animation: spin 0.5s linear infinite;\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),it=d.a.footer(Q||(Q=Object(b.a)(['\n  width: 100%;\n  height: 40px;\n  background: linear-gradient(35deg, #f8f18d, #e1f5c4);\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n'])));var ot=function(){return Object(l.jsxs)(it,{children:["Copyright \xa9 ",(new Date).getFullYear()," Hazel's Blog All Rights Reserved."]})};function st(t){return t.length<=300?t:t.slice(0,300)}var jt,bt,dt,lt,xt,pt,Ot,ht,ut=function(){var t=Object(j.h)().pageNum,e=Object(j.g)().pathname,n=Object(r.useState)([]),c=Object(o.a)(n,2),a=c[0],i=c[1],b=Object(r.useState)(!0),d=Object(o.a)(b,2),x=d[0],p=d[1],O=Object(r.useRef)(0);return Object(r.useEffect)((function(){(function(t,e){var n=Z+"/posts?",c={_sort:"createdAt",_order:"desc",_limit:t,_page:e},r=[];for(var a in c)r.push("".concat(a,"=").concat(encodeURIComponent(c[a])));return n+=r.join("&"),fetch(n)})(5,t).then((function(t){return O.current=t.headers.get("x-total-count"),t.json()})).then((function(t){i(t),p(!1)}))}),[t]),Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(et,{children:[Object(l.jsx)(X,{title:"\u6700\u65b0\u6587\u7ae0"}),x?Object(l.jsx)(at,{}):Object(l.jsxs)(l.Fragment,{children:[a.map((function(t){return Object(l.jsx)(_,{imgSrc:"https://images.unsplash.com/photo-1585366119957-e9730b6d0f60?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1051&q=80",title:t.title,linkPath:t.id,category:"\u55ae\u7d14mur-mur",author:t.userId.toString(),createdAt:new Date(t.createdAt).toLocaleString(),preText:"".concat(st(t.body)," ..."),edit:!1},t.id)})),Object(l.jsx)(nt,{children:new Array(Math.ceil(O.current/5)).fill(null).map((function(e,n){return Object(l.jsx)(s.b,{to:"/page/".concat(n+1),children:Object(l.jsx)(ct,{style:Number(t)===n+1?{background:"#8bcdcd",color:"white"}:{},children:n+1})},Object(rt.a)())}))})]})]}),!x&&Object(l.jsx)(ot,{})]})},ft=Object(r.createContext)(null),gt=Object(r.createContext)(null),mt=Object(d.a)(et)(jt||(jt=Object(b.a)(["\n  padding: 5% 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),vt=d.a.form(bt||(bt=Object(b.a)(["\n  border: solid 1px #222831;\n  width: 30%;\n  padding: 30px 40px 40px 40px;\n  text-align: center;\n"]))),yt=d.a.h1(dt||(dt=Object(b.a)(["\n  color: #222831;\n"]))),wt=d.a.div(lt||(lt=Object(b.a)(["\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n"]))),St=d.a.label(xt||(xt=Object(b.a)(["\n  color: #222831;\n  margin-bottom: 3px;\n"]))),kt=d.a.input(pt||(pt=Object(b.a)([""]))),Ct=d.a.button(Ot||(Ot=Object(b.a)(["\n  margin-top: 40px;\n  color: white;\n  background: #222831;\n  border: solid 1px #222831;\n  padding: 10px 20px;\n  font-weight: bold;\n  &:hover {\n    color: white;\n    background: #4d5a6e;\n    border: solid 1px #4d5a6e;\n    cursor: pointer;\n  }\n"]))),Nt=d.a.div(ht||(ht=Object(b.a)(["\n  word-break: break-word;\n  font-size: 14px;\n  color: darkred;\n  font-weight: bold;\n  margin-top: 20px;\n"])));function Tt(){var t=Object(r.useState)(""),e=Object(o.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),s=i[0],b=i[1],d=Object(r.useState)(null),x=Object(o.a)(d,2),p=x[0],O=x[1],h=Object(r.useState)(!1),u=Object(o.a)(h,2),f=u[0],g=u[1],m=Object(r.useContext)(ft).setUser,v=Object(j.f)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(mt,{children:Object(l.jsxs)(vt,{onSubmit:function(t){t.preventDefault(),O(null),f||(g(!0),function(t,e){return fetch("".concat(Z,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e})}).then((function(t){return t.json()}))}(n,s).then((function(t){if(0===t.ok)return O(t.message),void g(!1);var e=t.token;localStorage.setItem("token",e),tt().then((function(t){if(1!==t.ok)return O(t.toString()),void g(!1);m(t.data),g(!1),v.push("/")}))})))},children:[Object(l.jsx)(yt,{children:"Log In"}),Object(l.jsxs)(wt,{children:[Object(l.jsx)(St,{htmlFor:"username",children:"USERNAME"}),Object(l.jsx)(kt,{onChange:function(t){return c(t.target.value)},id:"username"})]}),Object(l.jsxs)(wt,{children:[Object(l.jsx)(St,{htmlFor:"password",children:"PASSWORD"}),Object(l.jsx)(kt,{type:"password",onChange:function(t){return b(t.target.value)},id:"password"})]}),Object(l.jsx)(Ct,{children:"Log in"}),p&&Object(l.jsxs)(Nt,{children:["\u54ce\u5440\uff01\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a",p]})]})}),Object(l.jsx)(ot,{})]})}var zt,At,Ft,Et,It,Dt,Ut,Mt,Rt,Bt,Pt,Gt,Ht=n.p+"static/media/hazel.2f711b2f.jpg",_t=Object(d.a)(et)(zt||(zt=Object(b.a)(["\n  height: 100%;\n"]))),Lt=d.a.div(At||(At=Object(b.a)(["\n  display: flex;\n  align-items: center;\n"]))),Jt=d.a.div(Ft||(Ft=Object(b.a)(["\n  width: 200px;\n  height: 200px;\n  border-radius: 50%;\n  background: url(",") no-repeat center / 200px;\n  margin-right: 40px;\n"])),Ht),Wt=d.a.div(Et||(Et=Object(b.a)(['\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  border: 1px solid #222831;\n  width: 60%;\n  border-radius: 50px;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  font-size: 30px;\n  padding: 30px;\n'])));function Vt(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(_t,{children:[Object(l.jsx)(X,{title:"\u95dc\u65bc\u6211"}),Object(l.jsxs)(Lt,{children:[Object(l.jsx)(Jt,{imgUrl:Ht}),Object(l.jsxs)(Wt,{children:["\u54c8\u56c9\u6211\u662f Hazel\uff01",Object(l.jsx)("br",{}),"\u606d\u559c\u4f60\u5df2\u88ab\u597d\u904b\u5c0f\u9d5d\u62dc\u8a2a\uff5e",Object(l.jsx)("br",{}),"\u63a5\u4e0b\u4f86\u7684\u5e7e\u5929\u5167\u6703\u6709\u597d\u4e8b\u964d\u81e8\u5466 \u2727*\uff61\u0669(\u02ca\u15dc\u02cb*)\u0648\u2727*\uff61"]})]})]}),Object(l.jsx)(ot,{})]})}var Yt,qt=Object(d.a)(et)(It||(It=Object(b.a)(["\n  padding: 5% 100px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Kt=d.a.form(Dt||(Dt=Object(b.a)(["\n  border: solid 1px #222831;\n  width: 30%;\n  padding: 30px 40px 40px 40px;\n  text-align: center;\n"]))),Qt=d.a.h1(Ut||(Ut=Object(b.a)(["\n  color: #222831;\n"]))),Xt=d.a.div(Mt||(Mt=Object(b.a)(["\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n"]))),Zt=d.a.label(Rt||(Rt=Object(b.a)(["\n  color: #222831;\n  margin-bottom: 3px;\n"]))),$t=d.a.input(Bt||(Bt=Object(b.a)([""]))),te=d.a.button(Pt||(Pt=Object(b.a)(["\n  margin-top: 40px;\n  color: white;\n  background: #222831;\n  border: solid 1px #222831;\n  padding: 10px 20px;\n  font-weight: bold;\n  &:hover {\n    color: white;\n    background: #4d5a6e;\n    border: solid 1px #4d5a6e;\n    cursor: pointer;\n  }\n"]))),ee=d.a.div(Gt||(Gt=Object(b.a)(["\n  word-break: break-word;\n  font-size: 14px;\n  color: darkred;\n  font-weight: bold;\n  margin-top: 20px;\n"])));function ne(){var t=Object(r.useState)(""),e=Object(o.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),s=i[0],b=i[1],d=Object(r.useState)(""),x=Object(o.a)(d,2),p=x[0],O=x[1],h=Object(r.useState)(null),u=Object(o.a)(h,2),f=u[0],g=u[1],m=Object(r.useState)(!1),v=Object(o.a)(m,2),y=v[0],w=v[1],S=Object(r.useContext)(ft).setUser,k=Object(j.f)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(qt,{children:Object(l.jsxs)(Kt,{onSubmit:function(t){t.preventDefault(),g(null),y||(w(!0),function(t,e,n){return fetch("".concat(Z,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:t,username:e,password:n})}).then((function(t){return t.json()}))}(n,s,p).then((function(t){if(0===t.ok)return g(t.message),void w(!1);var e=t.token;localStorage.setItem("token",e),tt().then((function(t){if(1!==t.ok)return g(t.toString()),void w(!1);S(t.data),k.push("/"),w(!1)}))})))},children:[Object(l.jsx)(Qt,{children:"Register"}),Object(l.jsxs)(Xt,{children:[Object(l.jsx)(Zt,{htmlFor:"nickname",children:"NICKNAME"}),Object(l.jsx)($t,{onChange:function(t){return c(t.target.value)},id:"nickname"})]}),Object(l.jsxs)(Xt,{children:[Object(l.jsx)(Zt,{htmlFor:"username",children:"USERNAME"}),Object(l.jsx)($t,{onChange:function(t){return b(t.target.value)},id:"username"})]}),Object(l.jsxs)(Xt,{children:[Object(l.jsx)(Zt,{htmlFor:"password",children:"PASSWORD"}),Object(l.jsx)($t,{type:"password",onChange:function(t){return O(t.target.value)},id:"password"})]}),Object(l.jsx)(te,{children:"Register"}),f&&Object(l.jsxs)(ee,{children:["\u54ce\u5440\uff01\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a",f]})]})}),Object(l.jsx)(ot,{})]})}var ce=Object(d.a)(et)(Yt||(Yt=Object(b.a)(["\n  padding: 40px 100px;\n"])));var re,ae,ie,oe,se=function(){var t=Object(r.useContext)(ft).user,e=Object(r.useContext)(gt).isGettingUser,n=Object(r.useState)([]),c=Object(o.a)(n,2),a=c[0],i=c[1],b=Object(r.useState)(!0),d=Object(o.a)(b,2),x=d[0],p=d[1],O=Object(j.h)().pageNum,h=Object(j.g)().pathname,u=Object(r.useRef)(0),f=Object(j.f)();return Object(r.useEffect)((function(){e||t||(alert("\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528\u7ba1\u7406\u6587\u7ae0\u529f\u80fd\u5594\uff01"),f.push("/"))}),[f,e,t]),Object(r.useEffect)((function(){t&&function(t,e,n){var c=Z+"/posts?",r={_sort:"createdAt",userId:t,_order:"desc",_limit:e,_page:n},a=[];for(var i in r)a.push("".concat(i,"=").concat(encodeURIComponent(r[i])));return c+=a.join("&"),fetch(c)}(t.id,5,O).then((function(t){return u.current=t.headers.get("x-total-count"),t.json()})).then((function(t){i(t),p(!1)}))}),[O,t]),Object(r.useEffect)((function(){window.scrollTo(0,0)}),[h]),Object(l.jsx)(l.Fragment,{children:t&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(ce,{children:[Object(l.jsx)(X,{title:"\u6211\u7684\u6587\u7ae0\u5217\u8868"}),x?Object(l.jsx)(at,{}):Object(l.jsxs)(l.Fragment,{children:[a.map((function(t){return Object(l.jsx)(_,{imgSrc:"https://images.unsplash.com/photo-1585366119957-e9730b6d0f60?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1051&q=80",title:t.title,linkPath:t.id,category:"\u55ae\u7d14mur-mur",author:t.userId.toString(),createdAt:new Date(t.createdAt).toLocaleString(),preText:"".concat(st(t.body)," ..."),edit:!0},t.id)})),Object(l.jsx)(nt,{children:new Array(Math.ceil(u.current/5)).fill(null).map((function(t,e){return Object(l.jsx)(s.b,{to:"/list/page/".concat(e+1),children:Object(l.jsx)(ct,{style:Number(O)===e+1?{background:"#8bcdcd",color:"white"}:{},children:e+1})},Object(rt.a)())}))})]})]}),Object(l.jsx)(ot,{})]})})},je=d.a.section(re||(re=Object(b.a)(["\n  padding: 80px 20%;\n"]))),be=d.a.div(ae||(ae=Object(b.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-size: 15px;\n']))),de=Object(d.a)(C)(ie||(ie=Object(b.a)(["\n  display: block;\n  font-size: 36px;\n  margin-bottom: 20px;\n  line-height: 40px;\n"]))),le=Object(d.a)(be)(oe||(oe=Object(b.a)(["\n  font-size: 20px;\n  margin-top: 20px;\n"])));var xe,pe,Oe,he,ue,fe,ge,me,ve,ye,we,Se,ke,Ce=function(){var t=Object(r.useState)(),e=Object(o.a)(t,2),n=e[0],c=e[1],a=Object(j.h)().id;return Object(r.useEffect)((function(){$(a).then((function(t){return c(t)}))}),[a]),Object(l.jsxs)(l.Fragment,{children:[n&&Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(je,{children:[Object(l.jsx)(de,{children:n[0].title}),Object(l.jsx)(k,{category:n[0].category?n[0].category:"\u55ae\u7d14mur-mur",author:n[0].userId,createdAt:new Date(n[0].createdAt).toLocaleString()}),Object(l.jsx)(le,{children:n[0].body})]})}),Object(l.jsx)(ot,{})]})},Ne=n(11),Te=Object(d.a)(et)(xe||(xe=Object(b.a)(["\n  padding: 80px 300px 150px 300px;\n"]))),ze=d.a.div(pe||(pe=Object(b.a)(["\n  border: solid 1px #818285;\n  padding: 30px 30px 70px 30px;\n  position: relative;\n"]))),Ae=d.a.h1(Oe||(Oe=Object(b.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  margin-bottom: 30px;\n']))),Fe=d.a.form(he||(he=Object(b.a)([""]))),Ee=d.a.div(ue||(ue=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 30px;\n"]))),Ie=d.a.input(fe||(fe=Object(b.a)(["\n  border: solid 1px #818285;\n  padding: 3px;\n  height: 30px;\n  width: 100%;\n"]))),De=d.a.textarea(ge||(ge=Object(b.a)(["\n  border: solid 1px #818285;\n  padding: 3px;\n  min-height: 400px;\n  width: 100%;\n"]))),Ue=d.a.button(me||(me=Object(b.a)(['\n  position: absolute;\n  right: 30px;\n  bottom: 30px;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  background: white;\n  border: solid 1px #818285;\n  padding: 5px 25px;\n  cursor: pointer;\n  &:hover {\n    background: #222831;\n    color: white;\n  }\n']))),Me=d.a.div(ve||(ve=Object(b.a)(["\n  word-break: break-word;\n  font-size: 14px;\n  color: darkred;\n  font-weight: bold;\n  margin-bottom: 10px;\n  text-align: right;\n"])));function Re(){var t=Object(r.useContext)(ft).user,e=Object(r.useContext)(gt).isGettingUser,n=Object(r.useState)({title:"",body:""}),c=Object(o.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(),b=Object(o.a)(s,2),d=b[0],x=b[1],p=Object(r.useState)(!1),O=Object(o.a)(p,2),h=O[0],u=O[1],f=Object(j.f)();function g(t){d&&x();var e=t.target,n=e.value;"title"!==e.name?i(Object(Ne.a)(Object(Ne.a)({},a),{},{body:n})):i(Object(Ne.a)(Object(Ne.a)({},a),{},{title:n}))}return Object(r.useEffect)((function(){e||t||(alert("\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528\u767c\u5e03\u6587\u7ae0\u529f\u80fd\u5594\uff01"),f.push("/"))}),[f,e,t]),Object(l.jsx)(l.Fragment,{children:t&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(Te,{children:Object(l.jsxs)(ze,{children:[Object(l.jsx)(Ae,{children:"\u767c\u8868\u6587\u7ae0"}),Object(l.jsxs)(Fe,{children:[Object(l.jsx)(Ee,{children:Object(l.jsx)(Ie,{onChange:g,name:"title",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u6a19\u984c"})}),Object(l.jsx)(Ee,{children:Object(l.jsx)(De,{onChange:g,name:"content",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u5167\u5bb9"})})]}),d&&Object(l.jsx)(Me,{children:d}),Object(l.jsx)(Ue,{onClick:function(t){if(t.preventDefault(),!h){if(u(!0),""===a.title||""===a.body)return x("\u6587\u7ae0\u6a19\u984c\u6216\u6587\u7ae0\u5167\u5bb9\u672a\u586b\u5beb\uff0c\u8acb\u518d\u6aa2\u67e5\u4e00\u6b21"),void u(!1);(function(t,e){var n=localStorage.getItem("token");return fetch("".concat(Z,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(n),"content-type":"application/json"},body:JSON.stringify({title:t,body:e})}).then((function(t){return t.json()}))})(a.title,a.body).then((function(t){if(0===t.ok)return x("\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a".concat(t.message)),void u(!1);u(!1),f.push("/")}))}},children:"\u9001\u51fa\u6587\u7ae0"})]})}),Object(l.jsx)(ot,{})]})})}var Be=d.a.header(ye||(ye=Object(b.a)(["\n  height: 54px;\n  padding: 35px 100px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),Pe=d.a.div(we||(we=Object(b.a)(["\n  display: flex;\n  align-items: center;\n"]))),Ge=Object(d.a)(s.b)(Se||(Se=Object(b.a)(['\n  margin: 0;\n  font-family: "Open Sans Condensed", sans-serif;\n  font-size: 40px;\n  font-weight: bold;\n  margin-right: 45px;\n  color: #222831;\n  cursor: pointer;\n']))),He=Object(d.a)(s.b)(ke||(ke=Object(b.a)(['\n  text-decoration: none;\n  color: #484e57;\n  cursor: pointer;\n  font-family: "Noto Sans TC", sans-serif;\n  & + & {\n    margin-left: 45px;\n  }\n']))),_e={borderBottom:"2px solid #f8f18d"};var Le,Je,We,Ve,Ye=function(){var t=Object(r.useContext)(ft),e=t.user,n=t.setUser,c=Object(r.useContext)(gt).isGettingUser,a=Object(r.useState)("/"),i=Object(o.a)(a,2),s=i[0],b=i[1],d=Object(j.g)(),x=Object(j.f)();return Object(r.useEffect)((function(){b(d.pathname)}),[d]),Object(l.jsxs)(Be,{children:[Object(l.jsxs)(Pe,{children:[Object(l.jsx)(Ge,{to:"/",children:"Hazel's Blog"}),Object(l.jsx)(He,{style:"/"===s?_e:{},to:"/",children:"\u9996\u9801"}),Object(l.jsx)(He,{style:"/about"===s?_e:{},to:"/about",children:"\u95dc\u65bc\u6211"})]}),!c&&Object(l.jsx)(Pe,{children:e?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(He,{style:"/list"===s?_e:{},to:"/list",children:"\u7ba1\u7406\u6211\u7684\u6587\u7ae0"}),Object(l.jsx)(He,{style:"/write"===s?_e:{},to:"/write",children:"\u767c\u5e03\u6587\u7ae0"}),Object(l.jsx)(He,{to:"/",onClick:function(){n(null),localStorage.setItem("token",""),"/"!==s&&x.push("/")},children:"\u767b\u51fa"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(He,{style:"/register"===s?_e:{},to:"/register",children:"\u8a3b\u518a"}),Object(l.jsx)(He,{style:"/login"===s?_e:{},to:"/login",children:"\u767b\u5165"})]})})]})},qe=d.a.div(Le||(Le=Object(b.a)(["\n  width: 100%;\n  height: 150px;\n  background: linear-gradient(35deg, #f8f18d, #e1f5c4);\n  position: relative;\n"]))),Ke=d.a.div(Je||(Je=Object(b.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]))),Qe=d.a.h1(We||(We=Object(b.a)(['\n  font-family: "Noto Sans TC", sans-serif;\n  font-size: 25px;\n  color: #222831;\n']))),Xe=d.a.p(Ve||(Ve=Object(b.a)(["\n  color: #222831;\n  margin-top: 10px;\n"])));var Ze,$e,tn,en,nn,cn,rn,an,on,sn=function(){return Object(l.jsx)(qe,{children:Object(l.jsxs)(Ke,{children:[Object(l.jsx)(Qe,{children:"\u7d14\u7cb9\u9760\u5317\u4e4b\u5730"}),Object(l.jsx)(Xe,{children:"WELCOME TO MY BLOG"})]})})},jn=Object(d.a)(et)(Ze||(Ze=Object(b.a)(["\n  padding: 80px 300px 150px 300px;\n"]))),bn=d.a.div($e||($e=Object(b.a)(["\n  border: solid 1px #818285;\n  padding: 30px 30px 70px 30px;\n  position: relative;\n"]))),dn=d.a.h1(tn||(tn=Object(b.a)(['\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  font-weight: bold;\n  margin-bottom: 30px;\n']))),ln=d.a.form(en||(en=Object(b.a)([""]))),xn=d.a.div(nn||(nn=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 30px;\n"]))),pn=d.a.input(cn||(cn=Object(b.a)(["\n  border: solid 1px #818285;\n  padding: 3px;\n  height: 30px;\n  width: 100%;\n"]))),On=d.a.textarea(rn||(rn=Object(b.a)(["\n  border: solid 1px #818285;\n  padding: 3px;\n  min-height: 400px;\n  width: 100%;\n"]))),hn=d.a.button(an||(an=Object(b.a)(['\n  position: absolute;\n  right: 30px;\n  bottom: 30px;\n  color: #222831;\n  font-family: "Noto Sans TC", sans-serif;\n  background: white;\n  border: solid 1px #818285;\n  padding: 5px 25px;\n  cursor: pointer;\n  &:hover {\n    background: #222831;\n    color: white;\n  }\n']))),un=d.a.div(on||(on=Object(b.a)(["\n  word-break: break-word;\n  font-size: 14px;\n  color: darkred;\n  font-weight: bold;\n  margin-bottom: 10px;\n  text-align: right;\n"])));function fn(){var t=Object(r.useState)(null),e=Object(o.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(),i=Object(o.a)(a,2),s=i[0],b=i[1],d=Object(r.useState)(!1),x=Object(o.a)(d,2),p=x[0],O=x[1],h=Object(j.f)(),u=Object(j.h)().id,f=Object(r.useContext)(gt).isGettingUser,g=Object(r.useContext)(ft).user;function m(t){s&&b();var e=t.target,r=e.value;"title"!==e.name?c(Object(Ne.a)(Object(Ne.a)({},n),{},{body:r})):c(Object(Ne.a)(Object(Ne.a)({},n),{},{title:r}))}return Object(r.useEffect)((function(){f||g||(alert("\u767b\u5165\u5f8c\u624d\u80fd\u4f7f\u7528\u7de8\u8f2f\u6587\u7ae0\u529f\u80fd\u5594\uff01"),h.push("/"))}),[h,f,g]),Object(r.useEffect)((function(){$(u).then((function(t){c(t[0])}))}),[u]),Object(l.jsx)(l.Fragment,{children:g&&n&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(jn,{children:Object(l.jsxs)(bn,{children:[Object(l.jsx)(dn,{children:"\u7de8\u8f2f\u6587\u7ae0"}),Object(l.jsxs)(ln,{children:[Object(l.jsx)(xn,{children:Object(l.jsx)(pn,{defaultValue:n.title,onChange:m,name:"title",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u6a19\u984c"})}),Object(l.jsx)(xn,{children:Object(l.jsx)(On,{defaultValue:n.body,onChange:m,name:"content",placeholder:"\u8acb\u8f38\u5165\u6587\u7ae0\u5167\u5bb9"})})]}),s&&Object(l.jsx)(un,{children:s}),Object(l.jsx)(hn,{onClick:function(t){if(t.preventDefault(),!p){if(O(!0),""===n.title||""===n.body)return b("\u6587\u7ae0\u6a19\u984c\u6216\u6587\u7ae0\u5167\u5bb9\u672a\u586b\u5beb\uff0c\u8acb\u518d\u6aa2\u67e5\u4e00\u6b21"),void O(!1);(function(t,e,n){var c=localStorage.getItem("token");return fetch("".concat(Z,"/posts/").concat(t),{method:"PATCH",headers:{authorization:"Bearer ".concat(c),"content-type":"application/json"},body:JSON.stringify({title:e,body:n,createdAt:Date.now()})}).then((function(t){return t.json()}))})(u,n.title,n.body).then((function(t){if(0===t.ok)return b("\u767c\u751f\u4e86\u4e00\u9ede\u932f\u8aa4\uff1a".concat(t.message)),void O(!1);O(!1),h.push("/list")}))}},children:"\u9001\u51fa\u6587\u7ae0"})]})}),Object(l.jsx)(ot,{})]})})}var gn=function(){var t=Object(r.useState)(null),e=Object(o.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(!0),i=Object(o.a)(a,2),b=i[0],d=i[1];return Object(r.useEffect)((function(){localStorage.getItem("token")?tt().then((function(t){if(1!==t.ok)return localStorage.setItem("token",""),void d(!1);c(t.data),d(!1)})):d(!1)}),[]),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(ft.Provider,{value:{user:n,setUser:c},children:Object(l.jsx)(gt.Provider,{value:{isGettingUser:b},children:Object(l.jsxs)(s.a,{basename:"/react-blog",children:[Object(l.jsx)(Ye,{}),Object(l.jsx)(sn,{}),Object(l.jsxs)(j.c,{children:[Object(l.jsx)(j.a,{exact:!0,path:"/",children:Object(l.jsx)(ut,{})}),Object(l.jsx)(j.a,{path:"/page/:pageNum",children:Object(l.jsx)(ut,{})}),Object(l.jsx)(j.a,{path:"/about",children:Object(l.jsx)(Vt,{})}),Object(l.jsx)(j.a,{exact:!0,path:"/list",children:Object(l.jsx)(se,{})}),Object(l.jsx)(j.a,{path:"/list/page/:pageNum",children:Object(l.jsx)(se,{})}),Object(l.jsx)(j.a,{path:"/Register",children:Object(l.jsx)(ne,{})}),Object(l.jsx)(j.a,{path:"/login",children:Object(l.jsx)(Tt,{})}),Object(l.jsx)(j.a,{path:"/post/:id",children:Object(l.jsx)(Ce,{})}),Object(l.jsx)(j.a,{exact:!0,path:"/write",children:Object(l.jsx)(Re,{})}),Object(l.jsx)(j.a,{path:"/edit/:id",children:Object(l.jsx)(fn,{})})]})]})})})})};i.a.render(Object(l.jsx)(gn,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.e0349dbd.chunk.js.map